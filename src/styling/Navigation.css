.nav {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 1rem;
	padding: 0.75rem 1rem;
	background: transparent;
	border-bottom: 1px solid rgba(0,0,0,0.04);
    height: 60px;
	position: relative; /* Crucial for mobile menu positioning */
}

.brand {
	display: inline-flex;
	align-items: center;
	gap: 0.5rem;
	color: var(--color-tertiary);
	text-decoration: none;
}
.brand .bi {
	font-size: 1.6rem;
	color: var(--color-primary);
}
.brand-title {
	font-size: 1.1rem;
	letter-spacing: 0.5px;
}

.menu-toggle {
	display: none;
	background: none;
	border: none;
	padding: 0.5rem;
	cursor: pointer;
	z-index: 1001;
}
.menu-toggle .bar {
	display: block;
	width: 22px;
	height: 2px;
	background: var(--color-tertiary);
	margin: 4px 0;
	transition: transform 180ms ease, opacity 120ms ease;
}
.menu-toggle.is-open .bar:nth-child(1) { 
	transform: translateY(6px) rotate(45deg); 
}
.menu-toggle.is-open .bar:nth-child(2) { 
	opacity: 0; 
}
.menu-toggle.is-open .bar:nth-child(3) { 
	transform: translateY(-6px) rotate(-45deg); 
}

.menu {
	list-style: none;
	display: flex;
	gap: 0.5rem;
	margin: 0;
	padding: 0;
	align-items: center;
}
.menu li { margin: 0; }

.nav-link {
	display: inline-flex;
	align-items: center;
	gap: 0.5rem;
	padding: 0.4rem 0.6rem;
	color: var(--color-tertiary);
	text-decoration: none;
	border-radius: 6px;
}
.nav-link i {
	display: none;
	font-size: 1rem;
	color: var(--color-primary);
}
.nav-link:hover,
.nav-link:focus {
	background: color-mix(in srgb, var(--color-primary) 7%, transparent);
}
.nav-link[aria-current="page"],
.nav-link.active {
	background: var(--color-primary);
	color: #fff;
}

/* Responsive: collapse into a toggle-controlled dropdown on small screens */
@media (max-width: 768px) {
	.menu-toggle { 
		display: flex; /* Changed from inline-flex to flex */
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}
	
	.menu {
		position: absolute;
		top: 100%; /* Changed from calc(100% + 8px) */
		left: 0;
		right: 0;
		background: #fff;
		flex-direction: column;
		padding: 1rem;
		box-shadow: 0 8px 24px rgba(0,0,0,0.08);
		display: none; /* Hidden by default */
		width: 100%; /* Full width */
		margin: 0;
		border-radius: 0 0 8px 8px; /* Rounded bottom corners only */
		z-index: 1000;
		border-top: 1px solid rgba(0,0,0,0.04);
	}
	
	.menu.is-open { 
		display: flex !important; /* Force display with important */
	}
	
	.menu li { 
		width: 100%; 
	}
	
	.nav-link { 
		width: 100%;
		padding: 0.75rem 1rem;
		justify-content: flex-start;
	}
	
	/* Show icons on mobile */
	.nav-link i { 
		display: inline-block; 
		margin-right: 0.5rem;
		width: 20px;
		text-align: center;
	}
}

/* Accessibility */
.nav :where(a, button):focus-visible { 
	outline: 3px solid color-mix(in srgb, var(--color-primary) 20%, white); 
	outline-offset: 3px; 
}